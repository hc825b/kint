#!/bin/bash

DIR=$(dirname "${BASH_SOURCE[0]}")
OPT="`llvm-config --bindir`/opt"
exec ${OPT} -disable-output -load=${DIR}/../lib/libintck.so \
	-targetlibinfo -tbaa -basicaa -globalopt -ipsccp -deadargelim \
	-simplifycfg -basiccg -prune-eh -inline -functionattrs -argpromotion \
	-sroa -early-cse -instcombine -lazy-value-info \
	-jump-threading -correlated-propagation -simplifycfg \
	-strip-dead-prototypes -globaldce -constmerge \
	-O2 \
	-overflow-idiom -adce -simplifycfg \
	-int-rewrite -overflow-simplify -int-libcalls \
	-overflow-simplify -adce -simplifycfg \
	-load-rewrite \
	-int-sat $@ 2>&1
